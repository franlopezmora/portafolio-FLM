---
title: "Crafting Cruma"
date: "2025-04-01"
description: "Cómo armamos Cruma, el planificador de horarios hecho por y para estudiantes."
---

# Crafting Cruma

En enero, con **Nicolás Garay**, nos pusimos a resolver un quilombo que todos los estudiantes conocemos: **armar horarios sin volverse loco**.  
La idea de Cruma pintaba simple: elegir materias, ver comisiones, evitar choques… pero atrás había un montón de decisiones chiquitas que, juntas, hacen que la experiencia sea **fluida** y no una lucha contra la compu.

Más que contarte *qué* hicimos, en este ensayo te cuento **cómo lo construimos**: qué fuimos decidiendo, cómo lo dividimos para poder mostrar algo rápido, y sobre todo, en qué detalles le pusimos cariño.

## Shippear temprano, iterar siempre

No quisimos clavar el 100% de una. Lo armamos en **capas** para ir mejorando de a poco:

1. **Flujo progresivo**: carrera → cuatrimestre → búsqueda → selección → armar horario.  
2. **Grilla de tiempo**: fija, bien alineada y de 8:00 a 23:05 cada 5 minutos.  
3. **Preview y fijado**: interacción clara, sin bloques que se escondan.  
4. **Extras**: filtros opcionales, estados más claros y detalles finos.

Cada capa se mergeaba apenas era **mejor que lo anterior**. Animaciones y lujos visuales vinieron después, cuando la base ya era sólida.

## La grilla: el corazón de todo

Trabajamos con pasos de 5 minutos y origen común en las 08:00. Así, cualquier horario lo podés traducir a píxeles sin sorpresas.

**Siempre** ordenamos por día y hora de entrada, para que nada “salte” en la vista. Y mapeamos los días a mano: lunes = 1, martes = 2… nada de magia rara.

## Preview vs. fijo: quién va arriba

Cuando estás probando comisiones, lo que ves como **preview** siempre queda arriba de lo que ya elegiste.  
¿Por qué? Porque si estás evaluando algo, es lo que más te importa en ese momento. Un simple `z-index` bien pensado hace toda la diferencia.

## Choques entre previews

Si dos previews chocan en el mismo día y franja, **no se tapan**: la columna se parte a la mitad y cada uno ocupa su lado.  
Si hay tres o más, rotamos (0/1/0…) y listo.

En esos casos apretados, mostramos solo lo básico: código, sección y hora. Menos ruido = más claridad.

## El bug que nos enseñó a pensar en identidades

Resulta que el `comisionId` se repite entre materias. La clave real es **materiaId + comisionId** (y si querés más precisión, sumale el horario). Ese cambio mental nos salvó de varios bugs raros y estados cruzados.

## El flujo y los “resets” que dan paz mental

Cruma no te hace pensar en la app, te deja pensar en tu cursada:

1. Sin carrera elegida, no mostramos nada.  
2. Elegís cuatrimestre → traemos materias de ese período y anuales.  
3. Ahí recién habilitamos búsqueda y filtros.  
4. Si cambiás carrera o cuatri, reseteamos todo. Nada de “fantasmas” en la pantalla.

## Búsqueda que no molesta

Filtro de año a la izquierda, búsqueda a la derecha.  
El listado aparece solo si escribís algo.  
Tildás una materia y se limpia el input para seguir sumando rápido.  
Y siempre tenés el panel de “Seleccionadas” a mano para sacar lo que quieras.

## El lado B: de PDF a datos útiles

Esta parte fue un parto. Los PDFs del Departamento de Sistemas venían de mil formas:  
algunos con texto, otros escaneados, tablas irregulares, días desordenados, formatos de hora distintos…

Terminamos armando un mini-ETL: detectamos si hacía falta OCR, normalizamos todo (unicode, guiones, espacios invisibles), convertimos días a números, horas a formato `H:mm`, y deduplicamos antes de guardar.

Gracias a eso, lo que ves en la grilla **cae exactamente donde debe**, aunque el PDF original fuera un desastre.

## Más allá de Sistemas

Por ahora Cruma anda con los horarios de Sistemas, porque eran los más a mano.  
Pero el sistema ya está listo para cualquier carrera de la facu: solo falta cargar los datos en el formato correcto y listo.  
Todo el backend y la lógica del front están pensados para escalar sin dramas.

## Repo abierto, mate y código

El código está en un repo público: [github.com/franlopezmora/cruma](https://github.com/franlopezmora/cruma).  
Si querés sumarte, ya sea corrigiendo un bug, cargando horarios de otra carrera o metiendo una mejora visual, adelante. Documentamos todo para que levantarlo sea fácil.

## Lo que se viene

* **Hosting estable** para que esté online todo el año.  
* **Dominio propio** (cruma.ar sería un gol).  
* **Certificado HTTPS** para seguridad y confianza.  
* **Sumar más carreras** de la facu.  
* **Automatizar** el proceso de carga de horarios.  
* **Optimizar mobile** para que usarlo desde el celu sea tan cómodo como en la compu.

## Cierre

Cruma nació para sacarnos un peso de encima, y sin quererlo, terminó listo para ayudar a cualquiera que arme su cursada.  
Hoy sirve a Sistemas, mañana puede servir a toda la facu.

El código está abierto, el sistema está preparado y lo único que falta es darle la infraestructura que se merece para que viva todo el año.

En el fondo, Cruma es eso: **una invitación a usarlo, mejorarlo y hacer que armar tu semana sea algo simple y hasta divertido**, no un dolor de cabeza con PDFs y planillas.
